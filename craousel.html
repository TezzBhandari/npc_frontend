<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
      integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <title>NPC | Photo Gallery</title>
    <style>
      .slider {
        max-width: 800px;
        width: 80%;
        border: 2px solid red;
        overflow: hidden;
      }
      .slides {
        display: flex;
      }

      .slide-img {
        min-width: 100%;
        height: 450px;
      }

      .slide-img > img {
        object-position: top;
      }
    </style>
  </head>
  <body>
    <div>
      <div class="slider">
        <div class="slides">
          <div class="slide-img">
            <img src="./public/images/banner1.png" alt="banner" />
          </div>
          <div class="slide-img">
            <img src="./public/images/banner2.jpeg" alt="banner" />
          </div>
          <div class="slide-img">
            <img src="./public/images/banner3.jpeg" alt="banner" />
          </div>
        </div>
      </div>
    </div>
    <script type="module" src="./main.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        let currentSlide = 0;
        const slides = document.querySelectorAll(".slide-img");
        const slidesContainer = document.querySelector(".slides");
        const totalSlides = slides.length;

        // Clone the first and last slides for smooth transition effect
        const firstClone = slides[0].cloneNode(true);
        const lastClone = slides[totalSlides - 1].cloneNode(true);

        slidesContainer.appendChild(firstClone); // Append the first slide clone at the end
        slidesContainer.insertBefore(lastClone, slides[0]); // Insert the last slide clone at the beginning

        let currentPosition = -100; // Start at the first actual slide
        slidesContainer.style.transform = `translateX(${currentPosition}%)`;

        function moveToSlide(position, transition = true) {
          if (!transition) {
            slidesContainer.style.transition = "none";
          } else {
            slidesContainer.style.transition = "transform 0.5s ease-in-out";
          }
          slidesContainer.style.transform = `translateX(${position}%)`;
        }

        function nextSlide() {
          currentPosition -= 100;
          currentSlide++;

          moveToSlide(currentPosition);

          // If the last slide is reached, reset to the first one after the transition
          if (currentSlide === totalSlides) {
            setTimeout(() => {
              currentPosition = -100;
              currentSlide = 0;
              moveToSlide(currentPosition, false); // Disable transition to make the jump seamless
            }, 500); // Wait for the transition to finish
          }
        }

        // Auto slide
        setInterval(nextSlide, 3000); // Change image every 3 seconds
      });
    </script>
  </body>
</html>
